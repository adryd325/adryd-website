---
import DefaultNav from "../../layouts/DefaultNav.astro";
import "../../global.scss";
import { getPages, type Frontmatter } from "../../Frontmatter.ts";
import PageDate from "@/components/pages/PageDate.astro";

export const frontmatter: Frontmatter = {
  title: "pages",
  description: "reference, blog posts, and all that jazz",
};

const posts2 = getPages();

const posts = posts2.filter((a) => !a.frontmatter.unlisted);
---

<style lang="scss">
  @use "@/mixin";
  .entry a {
    display: block;
    color: inherit;
    text-decoration: inherit;
  }

  .entry h2 {
    font-size: var(--text-2xl);
    margin: 1.5rem 0 0.5rem;
  }

  .entry .date {
    color: var(--color-blockquote);
  }

  .entry p {
    margin: 0.5rem 0;
  }
  .rss-link:hover {
    color: #ea580c;
    background-color: #fdba7444;

    @include mixin.dark() {
      color: #fb923c;
      background-color: #fdba7433;
    }
  }
</style>

<DefaultNav frontmatter={frontmatter}>
  <div class="theme theme-serif">
    <h1>pages</h1>
    <p>reference, blog posts, and all that jazz</p>
    <a class="fancy-link rss-link sans-serif" href="/feed.xml">RSS feed&nbsp;+</a>
    {
      posts.map((a) => {
        return (
          <div class="entry">
            <a href={a.url}>
              <h2 class="sans-serif">
                <span class="subtle-link">{a.frontmatter.title}&nbsp;â†’</span>
              </h2>
              <p><small class="date">
                <PageDate
                  date={a.frontmatter.date}
                  updatedDate={a.frontmatter.updatedDate}
                />
              </small></p>
              {a.frontmatter.description}
            </a>
          </div>
        );
      })
    }
  </div>
</DefaultNav>
